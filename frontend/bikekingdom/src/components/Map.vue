<template>
  <div style="height: 100%;">
    <div class="info" style="height: 15%">
      <h3>Filters</h3>
      <span>Center: {{ center }}</span>
      <span>Zoom: {{ zoom }}</span>
      <span>Bounds: {{ bounds }}</span>
    </div>

    <l-map
        style="height: 85%; width: 100%"
        :zoom="zoom"
        :center="center"
        @update:zoom="zoomUpdated"
        @update:center="centerUpdated"
        @update:bounds="boundsUpdated"
    >
      <l-tile-layer :url="url"></l-tile-layer>
      <l-geo-json :geojson="geojson"></l-geo-json>


      Stadia.AlidadeSmooth
    </l-map>
  </div>
</template>

<script>
import {LMap, LTileLayer, LGeoJson} from 'vue2-leaflet';
export default {
  components: {
    LMap,
    LTileLayer,
    LGeoJson,
  },
  data () {
    return {
      url: 'https://tiles.stadiamaps.com/tiles/alidade_smooth/{z}/{x}/{y}{r}.png',
      zoom: 15,
      center: [46.721974,9.531102],
      bounds: null,
      geojson: null
    };
  },
  async created () {
    // const response = await fetch('https://rawgit.com/gregoiredavid/france-geojson/master/regions/pays-de-la-loire/communes-pays-de-la-loire.geojson');
    // this.geojson = await response.json();
    // this.geojson = trail
    const trail = JSON.parse('{"type": "FeatureCollection", "features": [{ "type": "Feature", "properties": { }, "geometry": { "type": "LineString", "coordinates": [ [ 9.516247, 46.829436 ], [ 9.516248, 46.829463 ], [ 9.51615, 46.829636 ], [ 9.515942, 46.829693 ], [ 9.515865, 46.829731 ], [ 9.515801, 46.829786 ], [ 9.51566, 46.829869 ], [ 9.515557, 46.829898 ], [ 9.515454, 46.829945 ], [ 9.515479, 46.829936 ], [ 9.515754, 46.829913 ], [ 9.515834, 46.829938 ], [ 9.515912, 46.829937 ], [ 9.516055, 46.829907 ], [ 9.516251, 46.829886 ], [ 9.516331, 46.82992 ], [ 9.516348, 46.830019 ], [ 9.516324, 46.830064 ], [ 9.516338, 46.8301 ], [ 9.516391, 46.830108 ], [ 9.516469, 46.830098 ], [ 9.516598, 46.830032 ], [ 9.516634, 46.82996 ], [ 9.516686, 46.829932 ], [ 9.516776, 46.829903 ], [ 9.516803, 46.82993 ], [ 9.516856, 46.829938 ], [ 9.516908, 46.82991 ], [ 9.517011, 46.829872 ], [ 9.517102, 46.829861 ], [ 9.516965, 46.830044 ], [ 9.516868, 46.830234 ], [ 9.516884, 46.830306 ], [ 9.516849, 46.830442 ], [ 9.516696, 46.830543 ], [ 9.516633, 46.830599 ], [ 9.516609, 46.830662 ], [ 9.516598, 46.830725 ], [ 9.516614, 46.830788 ], [ 9.516642, 46.830832 ], [ 9.516682, 46.830859 ], [ 9.516721, 46.830849 ], [ 9.516759, 46.830812 ], [ 9.516873, 46.830711 ], [ 9.516937, 46.830683 ], [ 9.517233, 46.830516 ], [ 9.517259, 46.830524 ], [ 9.517274, 46.83056 ], [ 9.517263, 46.830623 ], [ 9.517291, 46.830668 ], [ 9.517331, 46.830685 ], [ 9.517384, 46.830693 ], [ 9.517461, 46.830656 ], [ 9.517588, 46.830545 ], [ 9.517627, 46.830545 ], [ 9.517641, 46.830562 ], [ 9.51763, 46.830616 ], [ 9.517619, 46.83068 ], [ 9.517622, 46.830761 ], [ 9.517612, 46.830833 ], [ 9.517588, 46.830896 ], [ 9.517567, 46.831032 ], [ 9.517569, 46.831085 ], [ 9.517597, 46.831121 ], [ 9.517703, 46.831164 ], [ 9.517744, 46.83119 ], [ 9.517758, 46.831226 ], [ 9.517747, 46.831262 ], [ 9.517709, 46.831308 ], [ 9.517568, 46.8314 ], [ 9.517349, 46.831494 ], [ 9.517247, 46.831577 ], [ 9.517235, 46.831604 ], [ 9.517249, 46.831631 ], [ 9.517328, 46.83163 ], [ 9.517317, 46.831675 ], [ 9.517243, 46.831811 ], [ 9.517232, 46.831856 ], [ 9.517246, 46.831892 ], [ 9.517286, 46.831892 ], [ 9.517324, 46.831873 ], [ 9.517351, 46.831872 ], [ 9.517352, 46.831908 ], [ 9.517328, 46.831963 ], [ 9.517343, 46.832007 ], [ 9.517383, 46.832025 ], [ 9.517461, 46.832023 ], [ 9.517526, 46.832004 ], [ 9.517654, 46.83193 ], [ 9.517692, 46.831884 ], [ 9.517731, 46.831874 ], [ 9.517632, 46.832029 ], [ 9.517609, 46.832102 ], [ 9.517598, 46.832174 ], [ 9.517601, 46.832237 ], [ 9.517579, 46.832363 ], [ 9.517593, 46.83239 ], [ 9.51762, 46.832398 ], [ 9.517659, 46.832398 ], [ 9.51766, 46.832407 ], [ 9.517648, 46.832452 ], [ 9.517574, 46.832561 ], [ 9.51755, 46.832625 ], [ 9.517565, 46.832669 ], [ 9.51762, 46.832731 ], [ 9.517687, 46.832775 ], [ 9.51778, 46.8328 ], [ 9.517858, 46.832799 ], [ 9.517975, 46.832752 ], [ 9.518094, 46.832795 ], [ 9.518212, 46.832801 ], [ 9.518278, 46.832791 ], [ 9.518303, 46.832773 ], [ 9.518327, 46.8327 ], [ 9.518351, 46.832664 ], [ 9.518402, 46.832618 ], [ 9.518441, 46.832617 ], [ 9.518481, 46.832626 ], [ 9.518533, 46.832625 ], [ 9.518585, 46.832615 ], [ 9.518637, 46.832587 ], [ 9.518713, 46.832522 ], [ 9.518753, 46.832531 ], [ 9.518806, 46.832557 ], [ 9.518943, 46.832707 ], [ 9.518959, 46.832779 ], [ 9.518962, 46.832851 ], [ 9.51899, 46.832895 ], [ 9.519029, 46.832904 ], [ 9.519068, 46.832885 ], [ 9.519119, 46.832839 ], [ 9.519145, 46.83283 ], [ 9.5192, 46.832901 ], [ 9.519253, 46.832927 ], [ 9.519319, 46.832943 ], [ 9.51936, 46.83297 ], [ 9.519402, 46.833041 ], [ 9.519442, 46.833058 ], [ 9.5196, 46.833091 ], [ 9.519527, 46.833236 ], [ 9.519504, 46.833318 ], [ 9.519507, 46.833381 ], [ 9.51958, 46.833586 ], [ 9.519582, 46.833622 ], [ 9.519611, 46.833703 ], [ 9.519613, 46.833748 ], [ 9.519874, 46.834058 ], [ 9.519985, 46.834227 ], [ 9.520066, 46.834271 ], [ 9.520211, 46.834313 ], [ 9.520185, 46.834304 ], [ 9.520175, 46.834386 ], [ 9.52013, 46.834566 ], [ 9.520122, 46.83471 ], [ 9.520208, 46.834898 ], [ 9.520253, 46.835041 ], [ 9.520377, 46.835192 ], [ 9.520511, 46.835288 ], [ 9.52079, 46.835364 ], [ 9.52087, 46.835399 ], [ 9.521071, 46.835521 ], [ 9.521399, 46.835848 ], [ 9.52152, 46.835936 ], [ 9.521587, 46.835971 ], [ 9.521643, 46.836059 ], [ 9.52178, 46.83621 ], [ 9.521845, 46.836209 ], [ 9.52192, 46.836117 ], [ 9.521932, 46.836072 ], [ 9.522037, 46.83607 ], [ 9.522051, 46.836106 ], [ 9.522077, 46.836088 ], [ 9.522105, 46.83615 ], [ 9.522121, 46.836222 ], [ 9.522098, 46.836312 ], [ 9.522023, 46.836395 ], [ 9.521985, 46.836422 ], [ 9.521894, 46.836451 ], [ 9.521815, 46.836452 ], [ 9.521763, 46.836462 ], [ 9.52179, 46.83648 ], [ 9.521909, 46.836505 ], [ 9.522068, 46.836556 ], [ 9.522213, 46.836571 ], [ 9.522345, 46.836596 ], [ 9.522664, 46.836707 ], [ 9.522836, 46.836731 ], [ 9.522874, 46.836712 ], [ 9.522924, 46.836648 ], [ 9.52301, 46.836493 ], [ 9.523048, 46.836466 ], [ 9.523075, 46.836474 ], [ 9.523116, 46.836519 ], [ 9.523183, 46.836544 ], [ 9.523221, 46.836517 ], [ 9.523245, 46.836462 ], [ 9.523244, 46.836426 ], [ 9.523295, 46.836389 ], [ 9.523347, 46.836388 ], [ 9.523415, 46.836441 ], [ 9.523551, 46.836574 ], [ 9.523605, 46.836609 ], [ 9.523644, 46.836599 ], [ 9.523668, 46.836553 ], [ 9.523692, 46.836499 ], [ 9.523691, 46.836454 ], [ 9.523737, 46.836309 ], [ 9.5238, 46.836245 ], [ 9.523842, 46.836289 ], [ 9.523901, 46.836477 ], [ 9.523943, 46.836548 ], [ 9.524025, 46.836619 ], [ 9.524117, 46.836635 ], [ 9.524195, 46.836616 ], [ 9.524246, 46.836579 ], [ 9.524258, 46.836543 ], [ 9.524243, 46.836507 ], [ 9.524242, 46.836471 ], [ 9.524267, 46.836453 ], [ 9.524321, 46.83647 ], [ 9.52436, 46.836469 ], [ 9.524398, 46.836441 ], [ 9.524535, 46.836259 ], [ 9.524664, 46.836193 ], [ 9.52473, 46.836219 ], [ 9.524893, 46.836351 ], [ 9.52503, 46.836502 ], [ 9.525113, 46.836608 ], [ 9.525166, 46.836625 ], [ 9.525216, 46.836579 ], [ 9.525325, 46.836334 ], [ 9.525319, 46.83619 ], [ 9.525341, 46.836073 ], [ 9.525377, 46.835991 ], [ 9.525403, 46.835973 ], [ 9.525429, 46.835981 ], [ 9.525501, 46.836133 ], [ 9.525582, 46.836195 ], [ 9.525733, 46.836363 ], [ 9.525844, 46.836523 ], [ 9.52602, 46.836682 ], [ 9.526079, 46.836833 ], [ 9.526081, 46.836905 ], [ 9.526128, 46.837085 ], [ 9.52627, 46.83737 ], [ 9.526287, 46.83746 ], [ 9.526277, 46.837541 ], [ 9.526255, 46.837649 ], [ 9.526121, 46.83793 ], [ 9.526112, 46.838039 ], [ 9.52609, 46.838129 ], [ 9.525943, 46.838411 ], [ 9.525857, 46.838556 ], [ 9.525807, 46.838611 ], [ 9.525781, 46.838621 ], [ 9.525769, 46.838666 ], [ 9.525784, 46.838693 ] ] } }]}')
    this.geojson = trail
    console.log("Fetched data")
  },
  methods: {
    zoomUpdated (zoom) {
      this.zoom = zoom;
    },
    centerUpdated (center) {
      this.center = center;
    },
    boundsUpdated (bounds) {
      this.bounds = bounds;
    },
  }
}
</script>
